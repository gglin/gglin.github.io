
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Exploring Ruby's Core (Methods, Modules, Classes, and more, oh my!) through Metaprogramming & Monkeypatching - Genetically Modified Origin</title>
  <meta name="author" content="George L">

  
  <meta name="description" content="A general disclaimer:
I just learned Ruby ~3 months ago, so please let me know if any of this can be improved upon As I&rsquo;ve been learning and &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://gglin.github.io/blog/2013/07/17/monkeypatching-ruby-core/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Genetically Modified Origin" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Genetically Modified Origin</a></h1>
  
    <h2>George's Blog - Digital Adventures in The Big Apple</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:gglin.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Exploring Ruby's Core (Methods, Modules, Classes, and More, Oh My!) Through Metaprogramming & Monkeypatching</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-17T17:04:00-04:00" pubdate data-updated="true">Jul 17<span>th</span>, 2013</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p><em>A general disclaimer:
I just learned Ruby ~3 months ago, so please let me know if any of this can be improved upon</em></p>

<p>As I&rsquo;ve been learning and becoming familiar with Ruby and its various libraries / gems, one thing I&rsquo;ve found myself doing often is opening up <code>irb</code> or <code>pry</code> and playing around all different kinds of methods, classes, and modules.  However, I&rsquo;ve found that it&rsquo;s hard to explore this consistently without having to constantly refer back to the documentation for what methods exist for each class / module or what the structure of the classes or modules are.  I just want to play around and avoid constantly going back online or to the source code! The solution: I ended up modifying the core <code>~/.irbrc</code> and <code>~/.pryrc</code> files to monkeypatch Ruby&rsquo;s core classes, so that everytime I start up <code>irb</code>, <code>pry</code>, or <code>rails console</code> I get access to my custom methods.  Here&rsquo;s a link to what my .pryrc file looks like:</p>

<p><a href="https://gist.github.com/gglin/5930277">https://gist.github.com/gglin/5930277</a></p>

<p><em>If you want to see an example of all this in action, go to <a href="#usage">the end of this post</a></em></p>

<p>Now, I can much more easily explore methods, classes, modules and other Ruby constructs:</p>

<h3>Exploring Methods</h3>

<ul>
<li>any method which ends with the word <code>"methods"</code>, i.e. returns an array of the defined methods for an object, whether it is all methods, instance methods, private methods, or whatever else, can now be prefixed with <code>"local_"</code> to return a much shorter array of just methods which aren&rsquo;t already defined for all Ruby Objects (though you can modify this default to return the difference with any class).

<ul>
<li>Ruby does have a built-in way to retrieve only methods defined in the immediate scope, not any mixed-in modules or superclasses, by setting the argument in <code>xxx_methods(arg)</code> so that <code>arg = false</code>. However, having a <code>local_xxx_methods</code> is more customizable, and may be more telling in many cases, such as where you are totally unfamiliar with a class or module and want to see not just how it is different from its immediate ancestors, but overall, i.e. to see the methods it inherited from everything but the Object class.</li>
</ul>
</li>
</ul>


<p>See code here:</p>

<figure class='code'><figcaption><span>.irbrc or .pryrc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Object</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">#   all methods named &#39;local_(*)_methods&#39; </span>
</span><span class='line'>  <span class="c1">#   should return &#39;(*)_methods&#39; minus those that exist in Object</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">method_missing</span><span class="p">(</span><span class="n">method_name</span><span class="p">,</span> <span class="n">klass</span> <span class="o">=</span> <span class="no">Object</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">method_name</span><span class="o">.</span><span class="n">to_s</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="mi">5</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&quot;local_&quot;</span> <span class="o">&amp;&amp;</span> <span class="n">method_name</span><span class="o">.</span><span class="n">to_s</span><span class="o">[-</span><span class="mi">7</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&quot;methods&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">method_name</span><span class="o">.</span><span class="n">to_s</span><span class="o">[</span><span class="mi">6</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">1</span><span class="o">].</span><span class="n">include?</span><span class="p">(</span><span class="s2">&quot;local&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="n">subname</span> <span class="o">=</span> <span class="n">method_name</span><span class="o">.</span><span class="n">to_s</span><span class="o">[</span><span class="mi">6</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">1</span><span class="o">].</span><span class="n">to_sym</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">subname</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span> <span class="o">-</span> <span class="n">klass</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">subname</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="k">super</span><span class="p">(</span><span class="n">method_name</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<br>


<h3>Exploring Namespaces</h3>

<ul>
<li><p>When I call ancestors on a module, the list of results returned is a mix of the modules mixed in and the superclasses.  Breaking these into two methods, <code>module_ancestors</code> and <code>class_ancestors</code>, helps me to better understand the inheritance chain of a given module or class.  For example, it&rsquo;s much clearer now that the class inheritance chain for <code>Fixnum</code> is <code>[Fixnum, Integer, Numeric, Object, BasicObject]</code>, while the modules <code>[Comparable, Kernel]</code> are only mixed in.</p></li>
<li><p>For a given namespace, such as <code>ActiveRecord::Base</code>, I was curious to see what the various modules and classes that exist under that namespace are, as there is (1) no easy way to see all of these without consulting the source code, which is massive for something like ActiveRecord, and not trivial to find and explore, and (2) no easy way to tell the difference between modules, classes, and other constants under that namespace.</p>

<ul>
<li>I initially consulted a StackOverflow post that explains how to do this, and wrote up the methods <code>subclasses</code> and <code>submodules</code>.  Unfortunately, these only look for subclasses within subclasses and submodules within submodules&hellip;</li>
<li>There are many cases where in the nested namespaces, you could have a class in a module in a class in a module, or anything else.  Although more complicated, I eventually came up with a way to do this using a &ldquo;subthing&rdquo; helper method, which is a ~20 line monstrosity I&rsquo;m not happy with.  Regardless, the methods <code>subconstruct_classes</code> and <code>subconstruct_methods</code> will look into all nested namespaces, no matter how deep, and retrieve all classes or modules.</li>
</ul>
</li>
</ul>


<br>


<ul>
<li>Modifying the above code slightly allows for retrieval of non-module, non-class constants for a given module &ndash; for example, finding that the only constants that exist for the <code>Math</code> module are <code>:PI</code> &amp; <code>:E</code>, and that their values are 3.14159&hellip; &amp; 2.71828&hellip; using <code>subconstants</code> and <code>subconstant_names</code></li>
</ul>


<p>See code here:</p>

<figure class='code'><figcaption><span>.irbrc or .pryrc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Module</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">class_methods</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">self</span><span class="o">.</span><span class="n">methods</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span> <span class="o">-</span> <span class="nb">self</span><span class="o">.</span><span class="n">instance_methods</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">class_ancestors</span>
</span><span class='line'>    <span class="nb">self</span><span class="o">.</span><span class="n">ancestors</span><span class="o">.</span><span class="n">select</span><span class="p">{</span><span class="o">|</span><span class="n">a</span><span class="o">|</span> <span class="n">a</span><span class="o">.</span><span class="n">class</span> <span class="o">==</span> <span class="no">Class</span><span class="p">}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">module_ancestors</span>
</span><span class='line'>    <span class="nb">self</span><span class="o">.</span><span class="n">ancestors</span><span class="o">.</span><span class="n">select</span><span class="p">{</span><span class="o">|</span><span class="n">a</span><span class="o">|</span> <span class="n">a</span><span class="o">.</span><span class="n">class</span> <span class="o">==</span> <span class="no">Module</span><span class="p">}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">subthings</span><span class="p">(</span><span class="n">recursive</span> <span class="o">=</span> <span class="kp">false</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
</span><span class='line'>    <span class="n">result</span> <span class="o">=</span> <span class="nb">self</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">collect</span> <span class="p">{</span><span class="o">|</span><span class="n">const_name</span><span class="o">|</span> <span class="nb">const_get</span><span class="p">(</span><span class="n">const_name</span><span class="p">)}</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">const</span><span class="o">|</span> <span class="k">yield</span><span class="p">(</span><span class="n">const</span><span class="p">)</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="o">[]</span> <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">recursive</span> <span class="o">==</span> <span class="kp">false</span>
</span><span class='line'>      <span class="n">result</span><span class="o">.</span><span class="n">uniq</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="n">looper</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">clone</span>
</span><span class='line'>      <span class="n">looper</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">thing</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">thing</span><span class="o">.</span><span class="n">subthings</span><span class="p">(</span><span class="kp">false</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">subthing</span><span class="o">|</span>
</span><span class='line'>          <span class="n">subthing</span><span class="o">.</span><span class="n">subthings</span><span class="p">(</span><span class="kp">false</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">subsubthing</span><span class="o">|</span>
</span><span class='line'>            <span class="n">recursive</span> <span class="o">=</span> <span class="kp">false</span> <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="n">subsubthing</span><span class="p">)</span>
</span><span class='line'>          <span class="k">end</span>
</span><span class='line'>          <span class="n">result</span> <span class="o">&lt;&lt;</span> <span class="n">thing</span><span class="o">.</span><span class="n">subthings</span><span class="p">(</span><span class="n">recursive</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="n">result</span><span class="o">.</span><span class="n">flatten</span><span class="o">.</span><span class="n">uniq</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># http://www.natontesting.com/2010/06/30/how-to-get-the-submodules-of-a-ruby-module/</span>
</span><span class='line'>  <span class="c1"># return only immediate nested namespace modules</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">submodules</span><span class="p">(</span><span class="n">recursive</span> <span class="o">=</span> <span class="kp">false</span><span class="p">)</span>
</span><span class='line'>    <span class="n">subthings</span><span class="p">(</span><span class="n">recursive</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">const</span><span class="o">|</span> <span class="n">const</span><span class="o">.</span><span class="n">class</span> <span class="o">==</span> <span class="no">Module</span><span class="p">}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># return only immediate nested namespace classes</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">subclasses</span><span class="p">(</span><span class="n">recursive</span> <span class="o">=</span> <span class="kp">false</span><span class="p">)</span>
</span><span class='line'>    <span class="n">subthings</span><span class="p">(</span><span class="n">recursive</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">const</span><span class="o">|</span> <span class="n">const</span><span class="o">.</span><span class="n">class</span> <span class="o">==</span> <span class="no">Class</span><span class="p">}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">subconstructs</span><span class="p">(</span><span class="n">recursive</span> <span class="o">=</span> <span class="kp">false</span><span class="p">)</span>
</span><span class='line'>    <span class="n">subthings</span><span class="p">(</span><span class="n">recursive</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">const</span><span class="o">|</span> <span class="n">const</span><span class="o">.</span><span class="n">class</span> <span class="o">==</span> <span class="no">Class</span> <span class="o">||</span> <span class="n">const</span><span class="o">.</span><span class="n">class</span> <span class="o">==</span> <span class="no">Module</span><span class="p">}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># returns all nested namespace modules</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">subconstruct_modules</span>
</span><span class='line'>    <span class="n">subconstructs</span><span class="p">(</span><span class="kp">true</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">const</span><span class="o">|</span> <span class="n">const</span><span class="o">.</span><span class="n">class</span> <span class="o">==</span> <span class="no">Module</span><span class="p">}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># returns all nested namespace classes</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">subconstruct_classes</span>
</span><span class='line'>    <span class="n">subconstructs</span><span class="p">(</span><span class="kp">true</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">const</span><span class="o">|</span> <span class="n">const</span><span class="o">.</span><span class="n">class</span> <span class="o">==</span> <span class="no">Class</span><span class="p">}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># retrieves non-class, non-module constant names</span>
</span><span class='line'>  <span class="c1"># e.g. Math.subconstants =&gt; [3.14159, 2.71828]</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">subconstants</span><span class="p">(</span><span class="n">recursive</span> <span class="o">=</span> <span class="kp">false</span><span class="p">)</span>
</span><span class='line'>    <span class="n">subthings</span><span class="p">(</span><span class="n">recursive</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">const</span><span class="o">|</span> <span class="n">const</span><span class="o">.</span><span class="n">class</span> <span class="o">!=</span> <span class="no">Class</span> <span class="o">&amp;&amp;</span> <span class="n">const</span><span class="o">.</span><span class="n">class</span> <span class="o">!=</span> <span class="no">Module</span><span class="p">}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># retrieves non-class, non-module constant names</span>
</span><span class='line'>  <span class="c1"># e.g. Math.subconstant_names =&gt; [:PI, :E]</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">subconstant_names</span>
</span><span class='line'>    <span class="nb">constants</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">const_name</span><span class="o">|</span> <span class="nb">const_get</span><span class="p">(</span><span class="n">const_name</span><span class="p">)</span><span class="o">.</span><span class="n">class</span> <span class="o">!=</span> <span class="no">Class</span> <span class="o">&amp;&amp;</span> <span class="nb">const_get</span><span class="p">(</span><span class="n">const_name</span><span class="p">)</span><span class="o">.</span><span class="n">class</span> <span class="o">!=</span> <span class="no">Module</span><span class="p">}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Exploring Class Inheritance</h3>

<ul>
<li>Finally, for classes, there is an easy built-in way to look up the inheritance chain and find the parent of a class using the <code>superclass</code> method.  Unfortunately the opposite isn&rsquo;t true &ndash; there&rsquo;s no built-in way to find all children of a parent class.  Fortunately Ruby has module called <code>ObjectSpace</code> which allows for traversal of all living objects in memory, allowing for a simple <code>child_classes</code> (&amp; alias <code>children</code>) method to be defined.  Note that this is <strong>NOT</strong> the same thing as the <code>subclasses</code> method I mentioned earlier &ndash; the latter only cares about namespaces, i.e. <code>BaseModule::AnotherModule::SubClass</code>, while <code>child_classes</code> is concerned with class inheritance, i.e. <code>ChildClass &lt; ParentClass</code>.</li>
</ul>


<p>See code here:</p>

<figure class='code'><figcaption><span>.irbrc or .pryrc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Class</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">child_classes</span>
</span><span class='line'>    <span class="no">ObjectSpace</span><span class="o">.</span><span class="n">each_object</span><span class="p">(</span><span class="no">Class</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">klass</span><span class="o">|</span> <span class="n">klass</span> <span class="o">&lt;</span> <span class="nb">self</span> <span class="p">}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">children</span>
</span><span class='line'>    <span class="n">child_classes</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">siblings</span>
</span><span class='line'>    <span class="nb">self</span><span class="o">.</span><span class="n">superclass</span><span class="o">.</span><span class="n">child_classes</span> <span class="o">-</span> <span class="o">[</span><span class="nb">self</span><span class="o">]</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Not finding giants to stand on the shoulders of, aka It&rsquo;s been done before</h3>

<p>Of course, it was only after I had written all of these that I found there&rsquo;s much more experienced coders who have done a lot of this already! Here are some (probably better) ways to accomplish what I monkeypatched:</p>

<ul>
<li><p>There is an entire gem which consists of libraries which extend the core capabilities of Ruby&rsquo;s built-in constructs: <a href="https://github.com/rubyworks/facets">Facets</a>.  A lot of the methods from Facets do the above, probably in a better way.  Updates to Facets have been infrequent in the last year, but nevertheless it seems to have tons of potentially useful additions to core Ruby.</p></li>
<li><p>There are in gems which make it much easier to print readable, colorful Ruby &ndash; for example, the &ldquo;y&rdquo; method in YAML, &ldquo;pp&rdquo; for prettyprint, &ldquo;pretty_generate&rdquo; in JSON.  Among these is a great little gem called <a href="https://github.com/michaeldv/awesome_print">Awesome Print</a>, which not only formats and colorizes the output, but also adds additional helpful info, such as the superclass of the printed object, the index of each element in an array, and vertically aligning the hash rocket in a hash so that the keys and values are easier to read.  To always include awesome print, I added this to my .pryrc as per instructions:</p></li>
</ul>


<figure class='code'><figcaption><span>.irbrc or .pryrc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s2">&quot;awesome_print&quot;</span>
</span><span class='line'><span class="no">AwesomePrint</span><span class="o">.</span><span class="n">pry!</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, this solves the problem of being able to tell the difference between class and module ancestors. For example, with ap enabled, <code>CodeRay::WordList::CaseIgnoring.ancestors</code> returns the following:</p>

<p><img src="http://i.imgur.com/ET92gHl.png"></p>

<p>This is clearly much easier to read and tells you not only which ancestors are classes, but what each ancestor&rsquo;s superclass is.</p>

<p>Regardless, by doing these monkeypatches, I&rsquo;ve found it much easier to navigate around all kinds of objects and methods in Ruby to learn more about it, without necessarily having to go back to the source code &ndash; for example, find a specific class within <code>ActiveRecord::Base</code> and then find all the local_methods for that class.  Even if there is still a lot of code I could change /  clean up, this was a great learning experience to understand Ruby more deeply. As they say, it&rsquo;s about the journey, not just the destination.</p>

<h3><span id="usage">Example of Usage</span></h3>

<p>As an example of how I can use the code I wrote, I started pry and typed in:</p>

<figure class='code'><figcaption><span>pry</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="no">CodeRay</span><span class="o">.</span><span class="n">subconstruct_modules</span>
</span><span class='line'><span class="o">[</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:FileType</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Styles</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Encoders</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:PluginHost</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">4</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Plugin</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">5</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Scanners</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">6</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:GZip</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">7</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Tokens</span><span class="o">::</span><span class="no">Undumping</span>
</span><span class='line'><span class="o">]</span>
</span><span class='line'><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="no">CodeRay</span><span class="o">.</span><span class="n">subconstruct_classes</span>
</span><span class='line'><span class="o">[</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">0</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:TokensProxy</span> <span class="o">&lt;</span> <span class="no">Object</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">1</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Tokens</span> <span class="o">&lt;</span> <span class="nb">Array</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">2</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:WordList</span> <span class="o">&lt;</span> <span class="no">Hash</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">3</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Duo</span> <span class="o">&lt;</span> <span class="no">Object</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">4</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Encoders</span><span class="o">::</span><span class="no">Encoder</span> <span class="o">&lt;</span> <span class="no">Object</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">5</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Encoders</span><span class="o">::</span><span class="no">Terminal</span> <span class="o">&lt;</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Encoders</span><span class="o">::</span><span class="no">Encoder</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">6</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:PluginHost</span><span class="o">::</span><span class="no">PluginNotFound</span> <span class="o">&lt;</span> <span class="no">LoadError</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">7</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:PluginHost</span><span class="o">::</span><span class="no">HostNotFound</span> <span class="o">&lt;</span> <span class="no">LoadError</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">8</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Scanners</span><span class="o">::</span><span class="no">Scanner</span> <span class="o">&lt;</span> <span class="no">StringScanner</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">9</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Scanners</span><span class="o">::</span><span class="no">Ruby</span> <span class="o">&lt;</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Scanners</span><span class="o">::</span><span class="no">Scanner</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">10</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:WordList</span><span class="o">::</span><span class="no">CaseIgnoring</span> <span class="o">&lt;</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:WordList</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">11</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:FileType</span><span class="o">::</span><span class="no">UnknownFileType</span> <span class="o">&lt;</span> <span class="no">Exception</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">12</span><span class="o">]</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Styles</span><span class="o">::</span><span class="no">Style</span> <span class="o">&lt;</span> <span class="no">Object</span>
</span><span class='line'><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now if I want to know the local class methods available for <code>CodeRay::WordList</code> and local instance methods availabe for <code>CodeRay::TokensProxy</code>, I can type:</p>

<figure class='code'><figcaption><span>pry</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Styles</span><span class="o">::</span><span class="no">Style</span><span class="o">.</span><span class="n">local_methods</span>
</span><span class='line'><span class="o">[</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">0</span><span class="o">]</span>      <span class="n">aliases</span><span class="p">()</span>       <span class="no">Class</span> <span class="p">(</span><span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Plugin</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">1</span><span class="o">]</span>  <span class="n">plugin_host</span><span class="p">(</span><span class="o">*</span><span class="n">host</span><span class="p">)</span>  <span class="no">Class</span> <span class="p">(</span><span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Plugin</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">2</span><span class="o">]</span>    <span class="n">plugin_id</span><span class="p">()</span>       <span class="no">Class</span> <span class="p">(</span><span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Plugin</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="n">register_for</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>     <span class="no">Class</span> <span class="p">(</span><span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Plugin</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">4</span><span class="o">]</span>        <span class="n">title</span><span class="p">(</span><span class="o">*</span><span class="n">title</span><span class="p">)</span> <span class="no">Class</span> <span class="p">(</span><span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:Plugin</span><span class="p">)</span>
</span><span class='line'><span class="o">]</span>
</span><span class='line'>
</span><span class='line'><span class="o">[</span><span class="mi">4</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:TokensProxy</span><span class="o">.</span><span class="n">local_instance_methods</span>
</span><span class='line'><span class="o">[</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">0</span><span class="o">]</span>    <span class="n">block</span><span class="p">()</span>                  <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:TokensProxy</span> <span class="p">(</span><span class="n">unbound</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">1</span><span class="o">]</span>   <span class="n">block</span><span class="o">=</span><span class="p">(</span><span class="n">arg1</span><span class="p">)</span>              <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:TokensProxy</span> <span class="p">(</span><span class="n">unbound</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">2</span><span class="o">]</span>     <span class="n">each</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">blk</span><span class="p">)</span>       <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:TokensProxy</span> <span class="p">(</span><span class="n">unbound</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">3</span><span class="o">]</span>   <span class="n">encode</span><span class="p">(</span><span class="n">encoder</span><span class="p">,</span> <span class="o">*</span><span class="n">options</span><span class="p">)</span> <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:TokensProxy</span> <span class="p">(</span><span class="n">unbound</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">4</span><span class="o">]</span>    <span class="n">input</span><span class="p">()</span>                  <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:TokensProxy</span> <span class="p">(</span><span class="n">unbound</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">5</span><span class="o">]</span>   <span class="n">input</span><span class="o">=</span><span class="p">(</span><span class="n">arg1</span><span class="p">)</span>              <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:TokensProxy</span> <span class="p">(</span><span class="n">unbound</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">6</span><span class="o">]</span>     <span class="n">lang</span><span class="p">()</span>                  <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:TokensProxy</span> <span class="p">(</span><span class="n">unbound</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">7</span><span class="o">]</span>    <span class="n">lang</span><span class="o">=</span><span class="p">(</span><span class="n">arg1</span><span class="p">)</span>              <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:TokensProxy</span> <span class="p">(</span><span class="n">unbound</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">8</span><span class="o">]</span>  <span class="n">options</span><span class="p">()</span>                  <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:TokensProxy</span> <span class="p">(</span><span class="n">unbound</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span> <span class="mi">9</span><span class="o">]</span> <span class="n">options</span><span class="o">=</span><span class="p">(</span><span class="n">arg1</span><span class="p">)</span>              <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:TokensProxy</span> <span class="p">(</span><span class="n">unbound</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">10</span><span class="o">]</span>  <span class="n">scanner</span><span class="p">()</span>                  <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:TokensProxy</span> <span class="p">(</span><span class="n">unbound</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">11</span><span class="o">]</span>   <span class="n">tokens</span><span class="p">()</span>                  <span class="ss">CodeRay</span><span class="p">:</span><span class="ss">:TokensProxy</span> <span class="p">(</span><span class="n">unbound</span><span class="p">)</span>
</span><span class='line'><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Some other fun things to try out:</p>

<figure class='code'><figcaption><span>pry</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="mi">5</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="no">Fixnum</span><span class="o">.</span><span class="n">class_ancestors</span>
</span><span class='line'><span class="o">[</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="no">Fixnum</span> <span class="o">&lt;</span> <span class="nb">Integer</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="nb">Integer</span> <span class="o">&lt;</span> <span class="no">Numeric</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="no">Numeric</span> <span class="o">&lt;</span> <span class="no">Object</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="no">Object</span> <span class="o">&lt;</span> <span class="no">BasicObject</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">4</span><span class="o">]</span> <span class="no">BasicObject</span>
</span><span class='line'><span class="o">]</span>
</span><span class='line'><span class="o">[</span><span class="mi">6</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="no">Fixnum</span><span class="o">.</span><span class="n">siblings</span>
</span><span class='line'><span class="o">[</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="no">Bignum</span> <span class="o">&lt;</span> <span class="nb">Integer</span>
</span><span class='line'><span class="o">]</span>
</span><span class='line'><span class="o">[</span><span class="mi">7</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="nb">require</span> <span class="s1">&#39;active_record&#39;</span>
</span><span class='line'><span class="kp">true</span>
</span><span class='line'><span class="o">[</span><span class="mi">8</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span><span class="o">.</span><span class="n">subconstant_names</span>
</span><span class='line'><span class="o">[</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="ss">:ACTIONS</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="ss">:UNASSIGNABLE_KEYS</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="ss">:CALLBACKS</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="ss">:ATTRIBUTE_TYPES_CACHED_BY_DEFAULT</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">4</span><span class="o">]</span> <span class="ss">:NAME_COMPILABLE_REGEXP</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">5</span><span class="o">]</span> <span class="ss">:CALL_COMPILABLE_REGEXP</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">6</span><span class="o">]</span> <span class="ss">:CALLBACK_FILTER_TYPES</span>
</span><span class='line'><span class="o">]</span>
</span><span class='line'><span class="o">[</span><span class="mi">9</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span><span class="o">.</span><span class="n">subconstants</span>
</span><span class='line'><span class="o">[</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">[</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="ss">:create</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="ss">:destroy</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="ss">:update</span>
</span><span class='line'>    <span class="o">]</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">[</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="s2">&quot;_destroy&quot;</span>
</span><span class='line'>    <span class="o">]</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">[</span>
</span><span class='line'>        <span class="o">[</span> <span class="mi">0</span><span class="o">]</span> <span class="ss">:after_initialize</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span> <span class="mi">1</span><span class="o">]</span> <span class="ss">:after_find</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span> <span class="mi">2</span><span class="o">]</span> <span class="ss">:after_touch</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span> <span class="mi">3</span><span class="o">]</span> <span class="ss">:before_validation</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span> <span class="mi">4</span><span class="o">]</span> <span class="ss">:after_validation</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span> <span class="mi">5</span><span class="o">]</span> <span class="ss">:before_save</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span> <span class="mi">6</span><span class="o">]</span> <span class="ss">:around_save</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span> <span class="mi">7</span><span class="o">]</span> <span class="ss">:after_save</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span> <span class="mi">8</span><span class="o">]</span> <span class="ss">:before_create</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span> <span class="mi">9</span><span class="o">]</span> <span class="ss">:around_create</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">10</span><span class="o">]</span> <span class="ss">:after_create</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">11</span><span class="o">]</span> <span class="ss">:before_update</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">12</span><span class="o">]</span> <span class="ss">:around_update</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">13</span><span class="o">]</span> <span class="ss">:after_update</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">14</span><span class="o">]</span> <span class="ss">:before_destroy</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">15</span><span class="o">]</span> <span class="ss">:around_destroy</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">16</span><span class="o">]</span> <span class="ss">:after_destroy</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">17</span><span class="o">]</span> <span class="ss">:after_commit</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">18</span><span class="o">]</span> <span class="ss">:after_rollback</span>
</span><span class='line'>    <span class="o">]</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="o">[</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="ss">:datetime</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="ss">:timestamp</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="ss">:time</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="ss">:date</span>
</span><span class='line'>    <span class="o">]</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">4</span><span class="o">]</span> <span class="sr">/\A[a-zA-Z_]\w*[!?=]?\z/</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">5</span><span class="o">]</span> <span class="sr">/\A[a-zA-Z_]\w*[!?]?\z/</span><span class="p">,</span>
</span><span class='line'>    <span class="o">[</span><span class="mi">6</span><span class="o">]</span> <span class="o">[</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="ss">:before</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="ss">:after</span><span class="p">,</span>
</span><span class='line'>        <span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="ss">:around</span>
</span><span class='line'>    <span class="o">]</span>
</span><span class='line'><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p><em>Thanks to the following posts on StackOverflow for guidance:</em></p>

<ol>
<li><a href="http://www.natontesting.com/2010/06/30/how-to-get-the-submodules-of-a-ruby-module/">http://www.natontesting.com/2010/06/30/how-to-get-the-submodules-of-a-ruby-module/</a></li>
<li><a href="http://stackoverflow.com/questions/2393697/look-up-all-descendants-of-a-class-in-ruby">http://stackoverflow.com/questions/2393697/look-up-all-descendants-of-a-class-in-ruby</a></li>
</ol>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">George L</span></span>

      








  


<time datetime="2013-07-17T17:04:00-04:00" pubdate data-updated="true">Jul 17<span>th</span>, 2013</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://gglin.github.io/blog/2013/07/17/monkeypatching-ruby-core/" data-via="gglin" data-counturl="http://gglin.github.io/blog/2013/07/17/monkeypatching-ruby-core/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/07/04/how-to-best-use-github/" title="Previous Post: Summary - Extending Ruby with Ruby">&laquo; Summary - Extending Ruby with Ruby</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/07/17/monkeypatching-ruby-core/">Exploring Ruby's Core (Methods, Modules, Classes, and more, oh my!) through Metaprogramming & Monkeypatching</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/04/how-to-best-use-github/">Summary - Extending Ruby with Ruby</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/28/yak-shaving/">You can learn a lot from shaving a yak</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/24/i-did-it-my-way/">I did it My Way</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/14/what-i-learned-about-programming-from-a-delivery-guy/">What I learned about programming from a delivery guy</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/gglin">@gglin</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'gglin',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - George L -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>. Design by <a href="http://octopressthemes.com">Octopress Themes</a>. Background image by <a href="http://www.flickr.com/photos/89433098@N04/">Florian Kraft Fotografie</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'gglin';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://gglin.github.io/blog/2013/07/17/monkeypatching-ruby-core/';
        var disqus_url = 'http://gglin.github.io/blog/2013/07/17/monkeypatching-ruby-core/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
